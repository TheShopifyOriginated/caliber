function eplGetCookie(e){return EPL_Front_Js.get_cookie(e)}jQuery(document).ready(function(d){Number.prototype.formatMoney=function(e,a,t){var r,e=isNaN(e=Math.abs(e))?2:e,a=null==a?".":a,t=null==t?",":t,l=this<0?"-":"",n=parseInt(r=Math.abs(+this||0).toFixed(e))+"",i=3<(i=n.length)?i%3:0;return l+(i?n.substr(0,i)+t:"")+n.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+t)+(e?a+Math.abs(r-n).toFixed(e).slice(2):"")},(EPL_Front_Js={init:function(){this.sort_listings(),this.author_tabs(),this.default_map(),this.switch_view(),this.set_default_view(),this.listing_search_tabs(),this.field_sliders(),this.epl_search(),this.contact_form_submit()},property_search:function(){var a;1==d("#property_id").length&&(a=null,d("#property_id").keyup(function(){if(""==d("#property_id").val())return d(".epl-property-suggestion").fadeOut(),!1;null!=a&&clearTimeout(a);var e=d(this).val();data={action:"epl_search_listing",s:e},a=setTimeout(function(){a=null,d.ajax({type:"POST",data:data,url:ajaxurl,success:function(e){1==d(".epl-property-suggestion").length?d(".epl-property-suggestion").replaceWith(e):d("#property_id").after(e),d(".epl-property-suggestion").fadeIn()}})},300)}),d(document.body).on("click",".epl-property-suggestion li",function(e){d("#property_id").val(d(this).data("id")),d(".epl-property-suggestion").fadeOut().remove()}))},sort_listings:function(){jQuery(".epl-sort-listings").on("change",function(){var e=jQuery(this).val(),a=jQuery(this).data("instance-id"),t=window.location.href,t=EPL_Front_Js.update_url_param(t,"sortby",e);""!=a&&(t=EPL_Front_Js.update_url_param(t,"instance_id",a)),window.location.replace(t)})},get_cookie:function(e){for(var a,t,r=document.cookie.split(";"),l=0;l<r.length;l++)if(a=r[l].substr(0,r[l].indexOf("=")),t=r[l].substr(r[l].indexOf("=")+1),(a=a.replace(/^\s+|\s+$/g,""))==e)return unescape(t)},update_url_param:function(e,a,t){var r=e.indexOf("#"),l=-1===r?"":e.substr(r),r=(e=-1===r?e:e.substr(0,r),new RegExp("([?&])"+a+"=.*?(&|$)","i")),n=-1!==e.indexOf("?")?"&":"?";return(e=e.match(r)?e.replace(r,"$1"+a+"="+t+"$2"):e+n+a+"="+t)+l},author_tabs:function(){jQuery("ul.epl-author-tabs li").click(function(){var e=jQuery(this).closest(".epl-author-box-container").attr("id"),a=jQuery(this).attr("data-tab");jQuery("#"+e+" ul.epl-author-tabs li").removeClass("epl-author-current"),jQuery("#"+e+" .epl-author-tab-content").removeClass("epl-author-current"),jQuery(this).addClass("epl-author-current"),jQuery("#"+e+" #"+a).addClass("epl-author-current")})},default_map:function(){var e,t,r,l,a;d("#epl-default-map").length&&"object"==typeof google&&"object"==typeof google.maps&&(a=d("#epl-default-map").data("cord"),e=d("#epl-default-map").data("address"),t=d("#epl-default-map").data("zoom"),r=d("#epl-default-map").data("id"),l=d("#epl-default-map").data("suburb_mode"),""!=a?(a=a.split(","),new google.maps.Geocoder,a={center:eplmapcord=new google.maps.LatLng(a[0],a[1]),zoom:t},window.epldefaultmap=new google.maps.Map(document.getElementById("epl-default-map"),a),epl_marker_icon="default.png",window.epldefaultmarker=new google.maps.Marker({map:epldefaultmap,position:eplmapcord,icon:epl_frontend_vars.image_base+epl_marker_icon})):""!=e&&(new google.maps.Geocoder).geocode({address:e},function(e,a){a==google.maps.GeocoderStatus.OK&&(a={center:e[0].geometry.location,zoom:t},epldefaultmap=new google.maps.Map(document.getElementById("epl-default-map"),a),epl_marker_icon="default.png",1!=l?d.ajax({type:"POST",url:epl_frontend_vars.ajaxurl,data:{action:"epl_update_listing_coordinates",coordinates:e[0].geometry.location.toString(),listid:r}}).done(function(e){}):epl_marker_icon="suburb.png",window.epldefaultmarker=new google.maps.Marker({map:epldefaultmap,position:e[0].geometry.location,icon:epl_frontend_vars.image_base+epl_marker_icon}))}))},set_default_view:function(){var e;void 0!==eplGetCookie("preferredView")?(e=this.get_cookie("preferredView"),jQuery('.epl-switch-view ul li[data-view="'+e+'"]').trigger("click")):"grid"==epl_frontend_vars.epl_default_view_type&&jQuery('.epl-switch-view ul li[data-view="grid"]').trigger("click")},switch_view:function(){jQuery(".epl-switch-view ul li").click(function(){var e=jQuery(this).data("view");d.ajax({type:"POST",url:epl_frontend_vars.ajaxurl,data:{action:"epl_update_default_view",view:e}}).done(function(e){}),"undefined"==typeof listingsMasonEnabled&&(jQuery(".epl-switch-view ul li").removeClass("epl-current-view"),jQuery(this).addClass("epl-current-view"),"grid"==e?(jQuery(".epl-property-blog").addClass("epl-listing-grid-view"),jQuery(".epl-listing-grid-view.epl-property-blog").each(function(e){0})):jQuery(".epl-property-blog").removeClass("epl-listing-grid-view"))})},listing_search_tabs:function(){jQuery("ul.property_search-tabs li").click(function(){var e=jQuery(this).attr("data-tab");jQuery("ul.property_search-tabs li").removeClass("epl-sb-current"),jQuery(".epl-search-form").removeClass("epl-sb-current"),jQuery(this).addClass("epl-sb-current"),jQuery("#"+e).addClass("epl-sb-current")})},get_url_vars:function(){for(var e,a=[],t=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<t.length;r++)e=t[r].split("="),a.push(e[0]),a[e[0]]=e[1];return a},get_url_var:function(e){return this.get_url_vars()[e]},field_sliders:function(){var e=d(".epl-search-form"),a=epl_frontend_vars.field_sliders;e.each(function(e){var c=d(this);d.each(a,function(n,i){var s,o,p,u,a,r,e,t;elExists=!0,d.each(i.els,function(e,a){d("."+a).length?d("."+a).closest(".epl-search-row").hide():elExists=!1}),elExists&&(i.els.length<2?(a=isNaN(Number(d("."+i.els[0]).data("min")))?i.min:Number(d("."+i.els[0]).data("min")),r=isNaN(Number(d("."+i.els[0]).data("max")))?i.max:Number(d("."+i.els[0]).data("max")),u=a,void 0!==(e=d.getUrlVar(i.els[0]))&&(u=parseInt(e)),d("."+i.els[0]).closest(".epl-search-row").after('<div class="epl-lf-range-slider epl-search-row epl-search-row-select fm-block epl-search-row-full "><label class="epl-search-label fm-label label_'+n+'" for="'+n+'">'+i.label+'</label><div class="field"><div class="'+n+'"></div></div></div>'),d("."+n).each(function(e){var t=d(this).closest(".epl-lf-range-slider");d(this).slider({min:a,max:r,range:"min",animate:!0,value:u,slide:function(e,a){d("."+i.els[0]).append(new Option(a.value.formatMoney(0),a.value)),d("."+i.els[0]).val(a.value).change(),t.find(".label_"+n).html(i.label+epl_frontend_vars.range_html.replace("{range_start}",i.prefix+a.value.formatMoney(0)+i.suffix).replace("{range_sep}","").replace("{range_end}",""))},stop:function(e,a){},create:function(e,a){t.find(".label_"+n).html(i.label+epl_frontend_vars.range_html.replace("{range_start}",i.prefix+u.formatMoney(0)+i.suffix).replace("{range_sep}","").replace("{range_end}",""))}})})):(s=c.find("."+i.els[0]),o=c.find("."+i.els[1]),p={},o.find("option").each(function(){p[d(this).attr("value")]=d(this).text()}),u=[s.data("min"),s.data("max")],a=isNaN(Number(s.data("min")))?i.min:Number(s.data("min")),r=isNaN(Number(o.data("max")))?i.max:Number(o.data("max")),e=d.getUrlVar(i.els[0]),t=d.getUrlVar(i.els[1]),void 0!==e&&""!=e&&(e=parseInt(e)),void 0!==t&&""!=t&&(t=parseInt(t)),(void 0!==e&&""!=e||void 0!==t&&""!=t)&&(u=[e,t]),s.closest(".epl-search-row").after('<div class="epl-lf-range-slider epl-search-row epl-search-row-select fm-block epl-search-row-full "><label class="epl-search-label fm-label label_'+n+'" for="'+n+'">'+i.label+'</label><div class="field"><div class="'+n+'"></div></div></div>'),c.find("."+n).each(function(e){var l=d(this).closest(".epl-lf-range-slider");d(this).slider({range:!0,step:0<c.find("."+i.els[1]).has("option").length?Number(c.find("."+i.els[1]+" option:eq(2)").val())-Number(c.find("."+i.els[1]+" option:eq(1)").val()):i.step,min:a,max:r,animate:!0,values:u,slide:function(e,a){s.append(new Option(a.values[0].formatMoney(0),a.values[0])),s.append(new Option(a.values[1].formatMoney(0),a.values[1])),o.append(new Option(a.values[0].formatMoney(0),a.values[0])),o.append(new Option(a.values[1].formatMoney(0),a.values[1])),s.val(a.values[0]).change(),o.val(a.values[1]).change();let t=i.prefix+a.values[0].formatMoney(0)+i.suffix,r=i.prefix+a.values[1].formatMoney(0)+i.suffix;a.values[0]in p&&(t=p[a.values[0]]+""+i.suffix),a.values[1]in p&&(r=p[a.values[1]]+""+i.suffix);t,i.separator,r;l.find(".label_"+n).html(i.label+epl_frontend_vars.range_html.replace("{range_start}",t).replace("{range_sep}",i.separator).replace("{range_end}",r))},stop:function(e,a){},create:function(e,a){l.find(".label_"+n).html(i.label+'<span class="epl-lf-label-txt"> '+i.prefix+u[0].formatMoney(0)+i.suffix+i.separator+i.prefix+u[1].formatMoney(0)+i.suffix+"</span>");let t=u[0].formatMoney(0)+i.suffix,r=u[1].formatMoney(0)+i.suffix;o.find('option[value="'+u[0]+'"]').length&&(t=o.find('option[value="'+u[0]+'"]').text()+""+i.suffix),o.find('option[value="'+u[1]+'"]').length&&(r=o.find('option[value="'+u[1]+'"]').text()+""+i.suffix);t,i.separator,r;l.find(".label_"+n).html(i.label+epl_frontend_vars.range_html.replace("{range_start}",t).replace("{range_sep}",i.separator).replace("{range_end}",r))}})})))})})},epl_search:function(){d(".epl-search-form form").on("submit",function(e){e.preventDefault();var a=d(this).serialize().split("&"),t=[];for(i in a)"string"==typeof a[i]&&a[i].split("=")[1]&&t.push(a[i]);e=t.join("&"),e=epl_frontend_vars.site_url+"?"+e;location.href=e})},contact_form_submit:function(){d(".epl-contact-capture-form form").on("submit",function(e){var a=d(this),e=(e.preventDefault(),d(this).serializeArray());e.push({name:"action",value:"epl_contact_capture_action"}),d.ajax({type:"POST",url:epl_frontend_vars.ajaxurl,data:e,dataType:"json"}).done(function(e){d(".epl-contact-widget-msgs").remove(),a.after('<div class="epl-contact-widget-msgs epl-contact-widget-msg-'+e.status+'">'+e.msg+"</div>"),"success"==e.status&&a.trigger("reset")})})}}).init()}),jQuery.extend({getUrlVars:function(){return EPL_Front_Js.get_url_vars()},getUrlVar:function(e){return EPL_Front_Js.get_url_var(e)}});